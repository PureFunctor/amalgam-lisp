[tox]
isolated_build = true
envlist = py37,py38

[testenv]
description = lint and test
whitelist_externals = poetry
setenv =
    py{37,38}: COVERAGE_FILE=.coverage.{envname}
commands =
    poetry install
    poetry run pre-commit install
    poetry run pre-commit run --all-files
    poetry run coverage run --branch -m pytest -v
